package PostProcessors;

import java.awt.Color;

import Common.ColorOutput;
import Common.FeatureList;
import LightDJGUI.GenericKnob;
import Visualizors.RGBGradientLinear;

/**
 * This post processor adjusts the overall "light volume" of our lights.
 * @author steve
 *
 */
public class LightVolume extends PostProcessor {

	protected GenericKnob lengthKnob;
	protected boolean active;
	protected long startTime;
	
	
	public LightVolume(double updatesPerSecond) {
		super(updatesPerSecond);
		
	}

	@Override
	public String getName() {
		return "Light Volume";
	}

	@Override
	public void init() {
		
		active = true;
		
		// Make a user control
		lengthKnob = new GenericKnob(0.7f, 40, "Volume");
		requestUserControl(lengthKnob);
		
	}

	@Override
	public void postProcess(ColorOutput colorOutput, FeatureList featureList) {
		
		
		// Currently not active. Should it became active?
		if (((Double) featureList.getFeature("KEY_BACKSPACE")) == 1.0) {
			// ACTIVATE!
			active = true;
			startTime = System.currentTimeMillis();
		} else {
			active = false;
		}
		
		
		// Continue a burst that is currently running
		if (active) {
			colorOutput.allOff();
		}
		
	}

	@Override
	public boolean isActive() {
		return active;
	}


}
