package PostProcessors;

import Common.ColorOutput;
import Common.FeatureList;
import LightDJGUI.GenericKnob;

/**
 * A post processor that takes care of white strobes, uv strobes, and strobe scattering effects.
 * @author steve
 *
 */
public class Strobes extends PostProcessor {

	protected GenericKnob lengthKnob;
	protected boolean active;
	protected int strobeFrame;
	protected int strobeFrameLength;
	
	public Strobes(double updatesPerSecond) {
		super(updatesPerSecond);
		
	}

	@Override
	public String getName() {
		return "Strobes";
	}

	@Override
	public void init() {
		
		strobeFrame = 0;
		strobeFrameLength = 8;
		
	}

	@Override
	public void postProcess(ColorOutput colorOutput, FeatureList featureList) {
		
		if (((Double) featureList.getFeature("KEY_F12")) == 1.0) {
			active = true;
		} else {
			active = false;
			strobeFrame = 0;
		}
		
		if (active) {
			if (strobeFrame == 0) {
				colorOutput.setWhiteStrobe();
			} else {
				colorOutput.allOff();
			}
			strobeFrame = (strobeFrame + 1) % strobeFrameLength;
		}

	}

	@Override
	public boolean isActive() {
		// TODO Auto-generated method stub
		return active;
	}


}
